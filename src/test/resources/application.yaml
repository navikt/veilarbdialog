spring:
  profiles:
    active: local
  application:
    name: "veilarbdialog"
  flyway:
    enabled: false
  main:
    allow-bean-definition-overriding: true
  kafka:
    consumer:
      group-id: 'veilarbdialog'
      max-poll-records: 1
      properties:
        enable:
          auto:
            commit: true
        retry:
          backoff:
            ms: '1000'
        reconnect:
          backoff:
            ms: '1000'
      auto-offset-reset: earliest
      key-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer
    listener:
      ack-mode: record
    producer:
      properties:
        enable:
          idempotence: 'true'
        max:
          block:
            ms: '2000'
      acks: all
      batch-size: '1'
    bootstrap-servers: ${spring.embedded.kafka.brokers}
    properties:
      schema:
        registry:
          url: mock://something
      specific:
        avro:
          reader: true
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
  batch:
    jdbc:
      initialize-schema:
management:
  endpoint:
    metrics:
      enabled: true
    prometheus:
      enabled: true
  endpoints:
    web:
      exposure:
        include: "*"
      base-path: "/internal"
  metrics:
    export:
      prometheus:
        enabled: true
server:
  servlet:
    context-path: "/veilarbdialog"

application:
  cluster: TEST
  namespace: APP_NAMESPACE_NAME
  environment: APP_ENVIRONMENT_NAME
  loginservice:
    idporten:
      audience: IDPORTEN_CLIENTID_USERNAME
      discoveryUrl: http://localhost:8080/IDPORTEN_DISCOVERY_URL
  abac:
    url: http://localhost:8080/ABAC_PDP_ENDPOINT_URL
  azure:
    ad:
      clientId: VEILARBDIALOG_OIDC_CLIENT_ID
      discoveryUrl: http://localhost:8080/AAD_DISCOVERY_URL
      loginservice:
        clientId: LOGINSERVICE_OIDC_CLIENT_ID
  datasource:
    url: jdbc:h2:file:~/database/veilarbdialog;DB_CLOSE_DELAY=-1;MODE=Oracle;AUTO_SERVER=TRUE;
    username: sa
    password: sa
  dialog:
    url: http://localhost:8080/DIALOG_EKSTERN_URL
  kafka:
    broker:
      url: http://localhost:8080/KAFKA_BROKERS_URL
    topic: aapen-fo-endringPaaDialog-v1-APP_ENVIRONMENT_NAME
    kvpAvsluttetTopic: kvpAvsluttetTopic
  oidc:
    disabled: true
  serviceuser:
    username: SERVICEUSER_USERNAME
    password: SERVICEUSER_PASSWORD
  sts:
    discovery:
      url: http://localhost:8080/SECURITYTOKENSERVICE_URL
  unleash:
    url: http://localhost:8080/UNLEASH_API_URL
  veilarboppfolging:
    api:
      url: http://localhost:${wiremock.server.port}/veilarboppfolging/api
      azureScope: api://test.pto.veilarboppfolging/.default
      tokenXScope: test:pto:veilarboppfolging
  veilarbperson:
    api:
      url: http://localhost:${wiremock.server.port}/veilarbperson/api
      scope: api://test.pto.veilarbperson/.default
  pdl:
    api:
      url: http://localhost:${wiremock.server.port}/pdl
  topic:
    ut:
      brukernotifikasjon:
        oppgave: min-side.aapen-brukernotifikasjon-oppgave-v1
        beskjed: min-side.aapen-brukernotifikasjon-beskjed-v1
        done: min-side.aapen-brukernotifikasjon-done-v1
      endringPaaDialog: dab.endring-paa-dialog-v1
    inn:
      oppfolgingsperiode: pto.oppfolgingsperiode-v1
      kvpavsluttet: pto.kvp-avsluttet-v1
      eksternVarselKvittering: teamdokumenthandtering.aapen-dok-notifikasjon-status
      aktivitetskortIdMapping: dab.aktivitetskort-idmapping-v1
  brukernotifikasjon:
    grace:
      periode:
        ms: 1000
    henvendelse:
      maksalder:
        ms: 2000
wiremock:
  server:
    port: 0